# ğŸ“‹ TimeWalker í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„± ê³„íš
> **ì‘ì„±ì¼**: 2026-01-14  
> **ì‘ì„±ì**: 100ë…„ì°¨ Flutter í…ŒìŠ¤íŠ¸ì½”ë“œ ì „ë¬¸ê°€  
> **ìƒíƒœ**: ğŸŸ¢ Phase 3 ì™„ë£Œ

---

## ğŸ“Š í˜„ì¬ í…ŒìŠ¤íŠ¸ í˜„í™© ë¶„ì„

### 1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼ (ì—…ë°ì´íŠ¸: 2026-01-14 Phase 3 ì™„ë£Œ)
```
âœ… í†µê³¼: 420ê°œ (+72)
â­ï¸ ìŠ¤í‚µ: 4ê°œ (ìœ„ì ¯ í…ŒìŠ¤íŠ¸ - ì• ë‹ˆë©”ì´ì…˜ íƒ€ì´ë¨¸ ì´ìŠˆ)
ğŸ“ í…ŒìŠ¤íŠ¸ íŒŒì¼: 33ê°œ (+13)
```

### 1.1 ì‹ ê·œ ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸
| íŒŒì¼ | í…ŒìŠ¤íŠ¸ ìˆ˜ | ìƒíƒœ |
|------|-----------|------|
| `progression_service_test.dart` | 23ê°œ | âœ… ì™„ë£Œ |
| `country_unlock_rules_test.dart` | 22ê°œ | âœ… ì™„ë£Œ |
| `user_progress_usecases_test.dart` | 7ê°œ | âœ… ì™„ë£Œ |
| `era_test.dart` | 8ê°œ | âœ… ì™„ë£Œ |
| `character_test.dart` | 8ê°œ | âœ… ì™„ë£Œ |
| `location_test.dart` | 6ê°œ | âœ… ì™„ë£Œ |
| `dialogue_entities_test.dart` | 12ê°œ | âœ… ì™„ë£Œ |
| `encyclopedia_entry_test.dart` | 11ê°œ | âœ… ì™„ë£Œ |
| `region_test.dart` | 7ê°œ | âœ… ì™„ë£Œ |
| `user_progress_provider_test.dart` | 7ê°œ | âœ… ì™„ë£Œ |
| `settings_test.dart` | 5ê°œ | âœ… ì™„ë£Œ |
| `achievement_test.dart` | 7ê°œ | âœ… ì™„ë£Œ |
| `country_test.dart` | 6ê°œ | âœ… ì™„ë£Œ |
| `exploration_providers_test.dart` | 5ê°œ | âœ… ì™„ë£Œ |
| `content_providers_test.dart` | 5ê°œ | âœ… ì™„ë£Œ |

### 2. í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„

| ë ˆì´ì–´ | íŒŒì¼ ìˆ˜ | í…ŒìŠ¤íŠ¸ íŒŒì¼ | ì»¤ë²„ë¦¬ì§€ |
|--------|---------|-------------|----------|
| **Domain - Entities** | 29ê°œ | 12ê°œ | 41% |
| **Domain - Services** | 3ê°œ | 3ê°œ | 100% |
| **Domain - Repositories** | 10ê°œ | 5ê°œ | 50% |
| **Domain - Usecases** | 3ê°œ | 1ê°œ | 33% |
| **Data - Repositories** | 11ê°œ | 5ê°œ | 45% |
| **Presentation - Providers** | 11ê°œ | 4ê°œ | 36% |
| **Presentation - Screens** | 59ê°œ | 1ê°œ | 2% |
| **Presentation - Widgets** | 31ê°œ | 0ê°œ | 0% |

### 3. í…ŒìŠ¤íŠ¸ ê°­ ë¶„ì„

#### âš ï¸ ë¯¸í…ŒìŠ¤íŠ¸ ì˜ì—­ (ìš°ì„ ìˆœìœ„ìˆœ)

**Critical (ì™„ë£Œ):**
- `progression_service.dart`
- `country_unlock_rules.dart`
- `user_progress_usecases.dart`

**High (ì™„ë£Œ):**
- `era.dart`, `character.dart`, `location.dart`
- `dialogue_entities.dart`
- `user_progress_provider.dart`

**Medium (ì™„ë£Œ):**
- ë‚˜ë¨¸ì§€ ì—”í‹°í‹°ë“¤
- ê¸°íƒ€ í”„ë¡œë°”ì´ë”ë“¤

---

## ğŸ¯ ì™œ ì´ë ‡ê²Œ ìƒì„±í–ˆë‚˜?

### ìš°ì„ ìˆœìœ„ ê²°ì • ì•Œê³ ë¦¬ì¦˜

```dart
// ê° í…ŒìŠ¤íŠ¸ ëŒ€ìƒì˜ ì ìˆ˜ ê³„ì‚°
double calculatePriority({
  required double businessImpact,    // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥ë„ (0-5)
  required double complexity,        // ë³µì¡ë„ (0-5)
  required double dependencyCount,   // ì˜ì¡´ íŒŒì¼ ìˆ˜
  required double changeFrequency,   // ë³€ê²½ ë¹ˆë„ (ì»¤ë°‹ ê¸°ì¤€)
  required double easeOfTesting,     // í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (ì—­ìˆœ)
}) {
  return (businessImpact * 0.30) +
         (complexity * 0.25) +
         (dependencyCount * 0.20) +
         (changeFrequency * 0.15) +
         (easeOfTesting * 0.10);
}
```

### ìš°ì„ ìˆœìœ„ ì„ ì • ì´ìœ 

| íŒŒì¼ | ì ìˆ˜ | ì´ìœ  |
|------|------|------|
| `progression_service` | â­â­â­â­â­ | ë­í¬ ê³„ì‚°, í•´ê¸ˆ ë¡œì§, ì§„í–‰ë¥  - ê²Œì„ ì½”ì–´ |
| `country_unlock_rules` | â­â­â­â­â­ | ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ì§ì ‘ êµ¬í˜„ |
| `user_progress_usecases` | â­â­â­â­ | ì‚¬ìš©ì ì•¡ì…˜ ì²˜ë¦¬ |
| `era.dart` | â­â­â­â­ | 20ê°œ+ ìŠ¤í¬ë¦°ì—ì„œ ì°¸ì¡° |
| `character.dart` | â­â­â­â­ | ëŒ€í™”, íƒìƒ‰ì˜ í•µì‹¬ |

---

## ğŸ” ì ê²€ ì•Œê³ ë¦¬ì¦˜ (3íšŒ ìê¸° ì ê²€)

### ì ê²€ 1: ì™„ì „ì„± ê²€ì‚¬
```
âœ… ëª¨ë“  ë ˆì´ì–´ ì»¤ë²„ë¦¬ì§€ ë¶„ì„ ì™„ë£Œ
âœ… usecases í´ë” ì¶”ê°€ ì‹ë³„
âœ… game í´ë” êµ¬ì¡° í™•ì¸
```

### ì ê²€ 2: ìš°ì„ ìˆœìœ„ ì ì ˆì„±
```
âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê¸°ë°˜ ìš°ì„ ìˆœìœ„
âœ… ì˜ì¡´ì„± ê·¸ë˜í”„ ë¶„ì„ ë°˜ì˜
âš ï¸ ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ ì´ìŠˆ â†’ í•´ê²° ë°©ì•ˆ ìˆ˜ë¦½
```

### ì ê²€ 3: ì‹¤í˜„ ê°€ëŠ¥ì„±
```
âœ… ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ í™œìš© ê°€ëŠ¥
âœ… Mock íŒ¨í„´ í™•ë¦½ë¨
âœ… ì˜ˆìƒ ì‘ì—…ëŸ‰ ì‚°ì • (125ê°œ í…ŒìŠ¤íŠ¸)
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‘ì„± ê³„íš

### Phase 1: Critical (ì™„ë£Œ)

#### 1.1 ProgressionService í…ŒìŠ¤íŠ¸ âœ…
#### 1.2 CountryUnlockRules í…ŒìŠ¤íŠ¸ âœ…
#### 1.3 UserProgressUsecases í…ŒìŠ¤íŠ¸ âœ…
#### 1.4 Era ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ âœ…
#### 1.5 Character ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ âœ…

---

### Phase 2: High (ì™„ë£Œ) âœ…

| í…ŒìŠ¤íŠ¸ íŒŒì¼ | ìƒíƒœ |
|-------------|------|
| location_test.dart | âœ… |
| dialogue_entities_test.dart | âœ… |
| encyclopedia_entry_test.dart | âœ… |
| region_test.dart | âœ… |
| user_progress_provider_test.dart | âœ… |

---

### Phase 3: Medium (ì™„ë£Œ) âœ…

| í…ŒìŠ¤íŠ¸ íŒŒì¼ | ìƒíƒœ |
|-------------|------|
| exploration_providers_test.dart | âœ… |
| content_providers_test.dart | âœ… |
| settings_test.dart | âœ… |
| achievement_test.dart | âœ… |
| country_test.dart | âœ… |

---

## ğŸ› ï¸ ë‹¨ê³„ë³„ ì‹¤í–‰ ë°©ë²•

### Step 1: í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ í™•ì¸
```bash
# í˜„ì¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í™•ì¸
flutter test --reporter expanded
```

### Step 2: Phase 1 í…ŒìŠ¤íŠ¸ ìƒì„±
```bash
# 1. progression_service í…ŒìŠ¤íŠ¸ ìƒì„±
touch test/unit/domain/services/progression_service_test.dart

# 2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ìƒˆ íŒŒì¼)
flutter test test/unit/domain/services/progression_service_test.dart
```

### Step 3: Mock í™•ì¥ (í•„ìš”ì‹œ)
```dart
// test/mocks/mock_progression_data.dart
// í…ŒìŠ¤íŠ¸ìš© Era, Character ë°ì´í„° ìƒì„±
```

### Step 4: ê° í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„±
```dart
// í…œí”Œë¦¿
import 'package:flutter_test/flutter_test.dart';
import 'package:time_walker/domain/services/progression_service.dart';
import '../../../helpers/test_utils.dart';

void main() {
  late ProgressionService service;
  
  setUp(() {
    service = ProgressionService();
  });
  
  group('ProgressionService', () {
    // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤...
  });
}
```

### Step 5: ê²€ì¦ ë° ì»¤ë²„ë¦¬ì§€ í™•ì¸
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ (ì„ íƒ)
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

---

## ğŸ“Œ ì£¼ì„ ì‘ì„± ê°€ì´ë“œ

### ì¢‹ì€ ì£¼ì„ ì˜ˆì‹œ
```dart
/// ì‹œëŒ€ í•´ê¸ˆ ì¡°ê±´ ì¶©ì¡± ì—¬ë¶€ ê²€ì¦
/// 
/// [era]ì˜ í•´ê¸ˆ ì¡°ê±´(ìµœì†Œ í¬ì¸íŠ¸, ì„ í–‰ ì‹œëŒ€)ì„ [progress]ì™€ ëŒ€ì¡°
test('ì„ í–‰ ì‹œëŒ€ ì™„ë£Œ ì‹œì—ë§Œ í•´ê¸ˆë¨', () {
  // Given: ì„ í–‰ ì‹œëŒ€ ë¯¸ì™„ë£Œ ìƒíƒœ
  final progress = createMockUserProgress(
    unlockedEraIds: ['joseon'],  // goryeo ë¯¸í•´ê¸ˆ
  );
  
  // When: ê³ ë ¤ ì‹œëŒ€ê°€ ì¡°ì„  ì™„ë£Œë¥¼ ìš”êµ¬
  final canUnlock = service.canUnlockEra(goryeoEra, progress);
  
  // Then: í•´ê¸ˆ ë¶ˆê°€
  expect(canUnlock, isFalse);
});
```

### í”¼í•´ì•¼ í•  ì£¼ì„
```dart
// âŒ ë¶ˆí•„ìš”
test('test 1', () {
  // í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤  â† ì˜ë¯¸ ì—†ìŒ
  expect(result, isTrue);  // ê²°ê³¼ê°€ trueì„  â† ì½”ë“œê°€ ì„¤ëª…í•¨
});
```

---

## ğŸ”§ í™œìš©í•œ ë„êµ¬ë“¤

### 1. Sequential Thinking MCP
- **ì‚¬ìš© ì‹œì **: í…ŒìŠ¤íŠ¸ í˜„í™© ë¶„ì„ ë° ìš°ì„ ìˆœìœ„ ê²°ì •
- **í™œìš© ë°©ë²•**: 5ë‹¨ê³„ ì‚¬ê³  ê³¼ì •ìœ¼ë¡œ ì²´ê³„ì  ë¶„ì„
- **ê²°ê³¼**: 3íšŒ ìê¸° ì ê²€ìœ¼ë¡œ ê³„íš ê²€ì¦

### 2. Dart MCP Server
- **ì‚¬ìš© ê°€ëŠ¥**: `mcp_dart-mcp-server_run_tests` í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- **í™œìš© ë°©ë²•**: í…ŒìŠ¤íŠ¸ ì‘ì„± í›„ ì¦‰ì‹œ ê²€ì¦

### 3. find_by_name / list_dir
- **ì‚¬ìš© ì‹œì **: í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„
- **ê²°ê³¼**: 203ê°œ lib íŒŒì¼ ì‹ë³„, 18ê°œ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë§¤í•‘

---

## ğŸ“ˆ ì˜ˆìƒ ê²°ê³¼

### Before
```
í…ŒìŠ¤íŠ¸: 280ê°œ
ì»¤ë²„ë¦¬ì§€: ~25% (ì¶”ì •)
```

### After (Phase 3 ì™„ë£Œ í›„)
```
í…ŒìŠ¤íŠ¸: 420ê°œ (140ê°œ ì¶”ê°€)
ì»¤ë²„ë¦¬ì§€: ~55% (ì¶”ì •)
í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: 95%+
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Phase 1: progression_service í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Phase 1: country_unlock_rules í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Phase 1: user_progress_usecases í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Phase 1: era ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Phase 1: character ì—”í‹°í‹° í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [x] Phase 2: location, dialogue, encyclopedia í…ŒìŠ¤íŠ¸
- [x] Phase 2: user_progress_provider í…ŒìŠ¤íŠ¸
- [x] Phase 3: ë‚˜ë¨¸ì§€ í”„ë¡œë°”ì´ë” í…ŒìŠ¤íŠ¸
- [ ] ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ìŠ¤í‚µ ì´ìŠˆ í•´ê²°

---

## ğŸ”— ì°¸ê³  ë¬¸ì„œ

- [ê¸°ì¡´ í…ŒìŠ¤íŠ¸ íŒ¨í„´](/test/helpers/test_utils.dart)
- [Mock í”„ë¡œë°”ì´ë”](/test/mocks/mock_providers.dart)
- [user_progress_test.dart](/test/unit/domain/entities/user_progress_test.dart) - ì°¸ê³ í•  ìš°ìˆ˜ ì‚¬ë¡€